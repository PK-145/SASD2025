# Code Smell: Dead Code

## ความหมายและสาเหตุ (Meaning & Reasons)
**Dead Code** คือส่วนของโค้ดในโปรแกรมที่ "ไม่มีวันถูกรัน (Never executed)" ในช่วง Runtime และ "ไม่มีผลกระทบใดๆ" ต่อผลลัพธ์หรือพฤติกรรมของโปรแกรม

**สาเหตุของปัญหา (Reasons):**
* **Requirements Changed:** เมื่อความต้องการเปลี่ยน หรือมีการแก้บั๊ก แต่ไม่มีใครมาลบโค้ดเก่าทิ้ง
* **Complex Conditionals:** การเขียนเงื่อนไขซับซ้อนจนทำให้บาง Branch ไม่มีทางเกิดขึ้นได้จริง
* **Unused Variables:** การประกาศตัวแปรและกำหนดค่า แต่ไม่เคยนำไปใช้

---

## ตัวอย่างโค้ดที่เกิด Code Smell (C#)
ตัวอย่างนี้นำมาจาก **GeeksforGeeks** (ปรับเป็น C#) ซึ่งแสดงให้เห็นถึง 2 รูปแบบหลัก คือ **Unreachable Code** และ **Unused Variables**

```csharp
public class ExampleClass
{
    // Example 1: Unreachable Code
    // กรณีที่โค้ดอยู่หลังคำสั่ง return ทำให้ไม่มีวันทำงาน
    public void Example1() 
    {
        int x = 10;
        
        return; // Program exits here
        
        x = 20; // Dead code (never executed) - Warning CS0162
    }

    // Example 2: Unused Variables
    // กรณีตัวแปรถูกประกาศและกำหนดค่า แต่ไม่เคยถูกนำไปใช้งาน
    public void Example2() 
    {
        int x = 5; // Dead code (x is never used)
        int y = 10;
        
        // ใช้แค่ค่า y เท่านั้น
        Console.WriteLine(y);
    }
}
```

---

## วิธีแก้ไขและผลลัพธ์ (Treatment & Payoff)
**วิธีการแก้ไข (Treatment):**
อ้างอิงจาก **GeeksforGeeks** กระบวนการหลักคือ **"Identification and Removal"**:
1.  **Static Analysis:** ใช้ IDE หรือเครื่องมือช่วยระบุจุดที่เป็น Dead Code
2.  **Delete Unused Code:** ลบส่วนที่ไม่จำเป็นออกทันที (เช่น ตัวแปร `x` ใน Example 2 หรือโค้ดหลัง `return` ใน Example 1)

**ตัวอย่างโค้ดที่ Refactoring แล้ว:**

```csharp
public class ExampleClass
{
    public void Example1() 
    {
        int x = 10;
        // ลบคำสั่ง x = 20 และ return ที่ขวางกั้นออก (หรือลบทั้งฟังก์ชันถ้าไม่ได้ใช้)
    }

    public void Example2() 
    {
        // ลบ int x = 5; ออก
        int y = 10;
        Console.WriteLine(y);
    }
}
```

**ประโยชน์ที่ได้รับ (Benefits/Payoff):**
อ้างอิงจาก **GeeksforGeeks**:
* **Enhanced Program Efficiency:** ลดการคำนวณและการใช้ Memory ที่ไม่จำเป็น (แม้ Compiler จะช่วยตัดออก แต่การลบที่ Source code ช่วยให้มั่นใจที่สุด)
* **Improved Maintainability:** โค้ดอ่านง่ายขึ้น นักพัฒนาโฟกัสเฉพาะส่วนที่ใช้งานจริง ลดความซับซ้อนในการดูแลรักษาและแก้บั๊กในอนาคต
* **Reduced Program Size:** ขนาดไฟล์เล็กลง

---

## กรณีที่ Code Smell นี้ไม่ได้บ่งบอกถึงโค้ดที่มีปัญหา (Exceptions)
ในบางสถานการณ์ Dead Code อาจเป็นสิ่งที่ยอมรับได้:
1.  **Public APIs / Libraries:** เมธอดที่เป็น `public` อาจเตรียมไว้ให้ผู้ใช้งานภายนอกเรียกใช้ แม้ในโปรเจกต์เราจะไม่ได้ใช้ก็ตาม
2.  **Reflection:** โค้ดที่ถูกเรียกผ่าน Reflection อาจดูเหมือน Dead Code ในสายตาของ Static Analysis Tools
3.  **Work in Progress (WIP):** โค้ดที่เขียนเผื่อไว้สำหรับฟีเจอร์ในอนาคต

---

## References (แหล่งอ้างอิง)
1.  **GeeksforGeeks** - Dead Code Elimination (Meaning, Examples, Benefits)
    * *Link:* [https://www.geeksforgeeks.org/compiler-design/dead-code-elimination/](https://www.geeksforgeeks.org/compiler-design/dead-code-elimination/)
2.  **Refactoring Guru** - Dead Code (Reasons, Treatment)
    * *Link:* [https://refactoring.guru/smells/dead-code](https://refactoring.guru/smells/dead-code)
3.  **SourceMaking** - Dead Code Description
    * *Link:* [https://sourcemaking.com/refactoring/smells/dead-code](https://sourcemaking.com/refactoring/smells/dead-code)
